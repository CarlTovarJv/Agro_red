/*! ClickStreamClient_1 v1.13.1; build: #30100 */
var ClickStreamClient_1;(()=>{var e={799:(e,r,t)=>{"use strict";t.r(r),t.d(r,{init:()=>xe,sendEvent:()=>Ae,sendEvents:()=>Ce,setConfig:()=>Ne,updateSessionParams:()=>ke});function n(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}class o extends Error{constructor(e,r){super(`API Error: ${e}`),n(this,"status",void 0),n(this,"data",void 0),this.name="ApiError",this.status=e,this.data=r}}const s={"Content-Type":"application/json"},a=(e=>{const{size:r,concurrency:t}=e,n=[];let o=0;const s=()=>{if(o<t&&n.length){const{producer:e,resolve:r,reject:t}=n.shift();o++,e().then((e=>{o--,s(),r(e)}),(e=>{o--,s(),t(e)}))}};return{add:e=>{if(n.length+o>=r)throw new Error(`RequestBuffer Error: Buffer full. \n         Available options: size:${r}, concurrency:${t}. \n         Current buffer data: buffer.length:${n.length}, tasksInProgress:${o}\n        `);return new Promise(((r,t)=>{n.push({producer:e,resolve:r,reject:t}),s()}))}}})({size:10,concurrency:2}),i=async e=>{let{method:r,body:t,url:n,headers:i}=e;return a.add((async()=>{const e=await fetch(n,{method:r,keepalive:!0,headers:{...s,...i},body:JSON.stringify(t)});if(!e.ok){const r=e.headers?.get("content-type")?.includes("json");if(r){const r=await e.json();throw new o(e.status,r)}{const r=await e.text();throw new Error(`Request failed with status ${e.status}: ${r}`)}}return 204===e.status?{}:e.json()}))},c=(e,r)=>i({method:"POST",url:`${e}/api/v1/token`,body:{cUid:r}}),u="CLICK_STREAM_AUTH_TOKEN",l=(()=>{let e=(()=>{try{return localStorage.getItem(u)}catch(e){return null}})(),r=null;const t=async t=>{let{baseUrl:n,clientId:o}=t;return r||(r=(async()=>{try{const r=await c(n,o);return e=r.data.token,(e=>{try{localStorage.setItem(u,e)}catch(e){}})(e),e}finally{r=null}})(),r)};return{getTokenSync:()=>e,getTokenAsync:async r=>e||t(r),generateToken:t}})(),d=e=>e instanceof o&&401===e.status,m=async e=>{const r=r=>i({...e,headers:{...e.headers,Authorization:`Bearer ${r}`}});try{const t=await l.getTokenAsync(e);return await r(t)}catch(t){if(d(t)){const t=await l.generateToken(e);return await r(t)}throw t}},f=e=>{let{events:r,baseUrl:t,clientId:n,session:o}=e;return m({baseUrl:t,clientId:n,method:"POST",url:`${t}/api/v2/events/action`,body:{events:r,session:o}})};function p(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function g(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?y(Object(t),!0).forEach((function(r){p(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function h(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.indexOf(n)>=0)continue;t[n]=e[n]}return t}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function w(e){const r=new FormData;return Object.entries(e).forEach((e=>{let[t,n]=e;r.append(t,String(n))})),r}function _(e){const r={};return Object.entries(e).forEach((e=>{let[t,n]=e;null!=n&&(r[t]=n)})),r}const v=["apiBaseUrl","token"];const b=["withStackTrace","message"];const E=function e(){const r=[];let t={},n=!1;function o(e){const{withStackTrace:o,message:s}=e,a=h(e,b),i=o?`${s} stacktrace: ${function(){let e;try{throw new Error}catch(r){e=r.stack}return e}()}`:s,c=g(g(g({},t),a),{},{message:i?.substring(0,2e3)});n?function(e){const{apiBaseUrl:r,token:t}=e,n=h(e,v);return window.fetch(`${r}/logger/write`,{headers:{token:t},method:"POST",body:w(n)})}(c).catch((e=>{console.error(e)})):r.push(c)}return{setup:function(e){n=!0,t=e,n&&(r.forEach(o),r.length=0)},log:function(e){o(_(g(g({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),{},{message:e,log_level:"notice"})))},error:function(e){o(_(g(g({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),{},{message:e,log_level:"error"})))},warn:function(e){o(_({context:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},message:e,log_level:"warning"}))},compose:function(r){const n=e();return n.setup(g(g({},t),r)),n}}}(),S="INIT_ERROR",O="SET_CONFIG_ERROR",I="SEND_EVENTS_ERROR",P="UPDATE_SESSION_PARAMS_ERROR",R="INIT_SESSION_ACTION_ERROR",U="ACTION_SEND_ACTION_EVENT_ERROR",T="ACTION_SEND_PAGE_VIEW_EVENT_ERROR",x="ACTION_SEND_MODAL_VIEW_EVENT_ERROR",k="UTILS_GET_BROWSER_NAME_ERROR",A="UTILS_GET_BROWSER_LANGUAGE_ERROR",C="UTILS_GET_OS_ERROR",N="UTILS_GET_PLATFORM_ERROR",j="UTILS_GET_TIMEZONE_ERROR",M="UTILS_GET_REFFERER_ERROR",L="UTILS_LOCAL_STORAGE_ERROR",$="UTILS_COOKIE_ERROR",D="UTILS_MARKETING_SEARCH_PARAMS_ERROR",G="UTILS_PARSE_JWT_ERROR",q=(()=>{let e=!1;return{setup:r=>{var t;e=!(!(t=r)||!t?.baseConfig)&&Boolean(t.baseConfig?.userId)&&Boolean(t.baseConfig?.token)&&Boolean(t.baseConfig?.apiUrl),e&&E.setup({userId:String(r.baseConfig.userId),token:r.baseConfig.token,appKey:r.baseConfig.appKey,apiBaseUrl:r.baseConfig.apiUrl,name:"ClickStreamClient"})},error:r=>{let{type:t,withStackTrace:n,err:o,data:s}=r;e&&E.error(JSON.stringify({errorName:o?.name,errorMessage:o?.message,errorData:o?.response?.data,...s,document}),{type:t,withStackTrace:n})},warn:r=>{let{type:t,withStackTrace:n,err:o,data:s}=r;e&&E.warn(JSON.stringify({errorName:o?.name,errorMessage:o?.message,errorData:o?.response?.data,...s,document}),{type:t,withStackTrace:n})}}})(),B=()=>Math.floor(Date.now()/1e3),V=()=>{try{const e=Intl?.DateTimeFormat()?.resolvedOptions?.()?.timeZone;return"string"==typeof e&&e.length>0?e:(()=>{const e=(new Date).getTimezoneOffset();if(!Number.isNaN(e))return`GMT${e>0?"-":"+"}${Math.abs(Math.floor(e/60))}`;return"Unknown"})()}catch(e){return q.error({type:j,err:e}),"Unknown"}},W=(e,r)=>{let t;try{t=new URL(r)}catch{t=new URL(e)}return t},F=e=>{const r=W(window.location.href,e);return{queryParams:Object.fromEntries(r.searchParams),href:r.origin+r.pathname}},K=e=>{if(!e&&!document.referrer)return null;try{const r=W(document.referrer,e);return{refHost:r.hostname,refUrl:r.origin+r.pathname,queryParams:Object.fromEntries(r.searchParams)}}catch(e){return q.error({type:M,err:e}),null}},z=()=>{try{const e=navigator.userAgent;return e.match(/opr\/|opios/i)?"Opera":e.match(/msie|trident/i)?"IE":e.match(/edg/i)?"Edge":e.match(/firefox|iceweasel|fxios/i)?"Firefox":e.match(/chromium/i)?"Chromium":e.match(/chrome|crios|crmo/i)?"Chrome":e.match(/safari|applewebkit/i)?"Safari":"Unknown"}catch(e){return q.error({type:k,err:e}),"Unknown"}},H=()=>{try{const e=window.navigator;return e.platform||e?.userAgentData?.platform||"Unknown"}catch(e){return q.error({type:N,err:e}),"Unknown"}},J=()=>{try{const e=window.navigator.userAgent,r=H(),t=["iPhone","iPad","iPod"],n=["Win32","Win64","Windows","WinCE"];return["Macintosh","MacIntel","MacPPC","Mac68K"].includes(r)?"Mac":t.includes(r)?"IOS":n.includes(r)?"Windows":/Android/.test(e)?"Android":/Linux/.test(r)?"Linux":"Unknown"}catch(e){return q.error({type:C,err:e}),"Unknown"}};function Z(e){try{const r=new URLSearchParams(e);return{utmS:r.get("utm_source")||void 0,utmT:r.get("utm_term")||void 0,utmM:r.get("utm_medium")||void 0,utmC:r.get("utm_campaign")||void 0,gclid:r.get("gclid")||void 0,msclkid:r.get("msclkid")||void 0,fbclid:r.get("fbclid")||void 0}}catch(e){return q.error({type:D,err:e}),{}}}const Q=e=>({uUid:e.sessionParams.user_uuid,userId:e.sessionParams.userId,stUid:e.sessionParams.stream_uuid,ln:e.sessionParams.language,so:e.sessionParams.source,dv:e.sessionParams.device,crAt:B(),tz:V(),url:F().href,refH:K()?.refHost,refUrl:K()?.refUrl,br:z(),plf:H(),os:J(),...Z(window.location?.search)}),X=async(e,r)=>{try{await f({events:e,baseUrl:r.api.baseUrl,clientId:r.api.clientId,session:Q(r)})}catch(t){const n={type:U,err:t,data:{events:e,config:r,isOnline:navigator.onLine,page:window.location.href,visibility:document.visibilityState}};if(e.some((e=>{let{e:r}=e;return"UPLOAD_FROM_LANDINGS"===r})))return void q.warn(n);q.error(n)}},Y=e=>{let{events:r,baseUrl:t,clientId:n,session:o}=e;return m({baseUrl:t,clientId:n,method:"POST",url:`${t}/api/v2/events/page_view`,body:{events:r,session:o}})},ee=async(e,r)=>{try{await Y({events:e,baseUrl:r.api.baseUrl,clientId:r.api.clientId,session:Q(r)})}catch(r){q.error({type:T,err:r,data:{events:e}})}},re=e=>{let{events:r,baseUrl:t,clientId:n,session:o}=e;return m({baseUrl:t,clientId:n,method:"POST",url:`${t}/api/v2/events/modal_view`,body:{events:r,session:o}})},te=async(e,r)=>{try{await re({events:e,baseUrl:r.api.baseUrl,clientId:r.api.clientId,session:Q(r)})}catch(r){q.error({type:x,err:r,data:{events:e}})}},ne=e=>e.reduce(((e,r)=>(e[r.type]||(e[r.type]=[]),e[r.type].push(r),e)),{});let oe=function(e){return e.Action="action",e.ModalView="modal_view",e.PageView="page_view",e}({});const se=e=>e.type===oe.Action,ae=e=>e.type===oe.PageView,ie=e=>e.type===oe.ModalView,ce=e=>e.map((e=>e.payload)),ue=(e,r)=>{const t=ne(e);Object.keys(t).forEach((e=>{const n=t[e],o=ce(n);return(e=>e.every(se))(n)?X(o,r):(e=>e.every(ae))(n)?ee(o,r):(e=>e.every(ie))(n)?te(o,r):null}))},le=e=>{try{const r=document.cookie.match(new RegExp(`(?:^|; )${e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")}=([^;]*)`));return r?decodeURIComponent(r[1]):null}catch(e){return q.error({type:$,err:e}),null}},de=function(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1800,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(e=>{const r=e.split(".");return r.length<3?e:r.slice(r.length-2,r.length).join(".")})(window.location.hostname);try{const o=encodeURIComponent(r);document.cookie=`${e}=${o}; max-age=${t}; domain=${n}; path=/; secure`}catch(e){q.error({type:$,err:e})}},me="CLICKSTREAM_SESSION_INITED",fe=e=>{let{user_uuid:r,stream_uuid:t}=e;return!(()=>{try{return Boolean(localStorage.getItem(me))}catch(e){return q.error({type:L,err:e}),!1}})()||(!le("user_uuid")||!le("stream_uuid")||(le("user_uuid")!==r||le("stream_uuid")!==t))},pe=e=>{if(!e)return null;try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return q.error({type:G,err:e}),null}};function ye(){let e=(new Date).getTime(),r="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{let n=16*Math.random();return e>0?(n=(e+n)%16|0,e=Math.floor(e/16)):(n=(r+n)%16|0,r=Math.floor(r/16)),("x"===t?n:3&n|8).toString(16)}))}const ge=()=>{const e=le("user_uuid"),r=pe(le("airSlate_session_token"))?.user_uuid,t=new URLSearchParams(window.location.search).get("cs_uu"),n=window.crypto?.randomUUID?.()||ye();return e||r||t||n},he=()=>{const e=le("stream_uuid"),r=new URLSearchParams(window.location.search).get("cs_su"),t=window.crypto?.randomUUID?.()||ye();return e||r||t},we=()=>window.user?.lang||window.pdffiller?.lang||(()=>{try{return navigator.language.split("-")[0]}catch(e){return q.error({type:A,err:e}),"Unknown"}})(),_e=e=>({userId:e?.userId??window.user?.userId??0,user_uuid:e?.user_uuid||ge(),stream_uuid:e?.stream_uuid||he(),language:e?.language||we(),source:e?.source||"others",device:e?.device||"desktop"}),ve=e=>{e.user_uuid&&de("user_uuid",e.user_uuid),e.stream_uuid&&de("stream_uuid",e.stream_uuid)},be=e=>{let{baseConfig:r,clickStreamConfig:t}=e;if(!t.api.clientId)throw new Error("clientId is not provided in clickStreamConfig.api");return{...t,sessionParams:_e({...t.sessionParams||{},userId:t.sessionParams?.userId??(Number(r?.userId)||0)}),defaultTracking:t.defaultTracking||{}}},Ee=e=>{let{baseUrl:r,clientId:t,attrs:n}=e;return m({baseUrl:r,clientId:t,method:"POST",url:`${r}/api/v2/sessions`,body:n})},Se=async e=>{try{await Ee({baseUrl:e.api.baseUrl,clientId:e.api.clientId,attrs:Q(e)}),(()=>{try{localStorage.setItem(me,"TRUE")}catch(e){q.error({type:L,err:e})}})(),ve(e.sessionParams)}catch(e){q.error({type:R,err:e})}};const Oe=function(e){return Boolean(e)&&Object.keys(e).length>0},Ie=(e,r)=>{const{attrs:{e:t,lc:n,src:o,exp:s},customAttrs:a}=e;return{userId:r.sessionParams.userId,uUid:r.sessionParams.user_uuid,stUid:r.sessionParams.stream_uuid,crAt:B(),e:t,lc:n,src:o,exp:s,...Oe(a)&&{attrs:a}}},Pe=(e,r)=>{const{attrs:{e:t,url:n,ref:o,exp:s},customAttrs:a}=e,{href:i,queryParams:c}=F(n),{refUrl:u,queryParams:l}=K(o)||{},d={...a,...Oe(c)&&{url_query:c},...Oe(l)&&{ref_query:l}};return{e:t,userId:r.sessionParams.userId,uUid:r.sessionParams.user_uuid,stUid:r.sessionParams.stream_uuid,crAt:B(),url:i,ref:u,exp:s,...Oe(d)&&{attrs:d}}},Re=(e,r)=>{const{attrs:{url:t,ref:n}={},customAttrs:o}=e,{href:s,queryParams:a}=F(t),{refUrl:i,queryParams:c}=K(n)||{},u={...o,...Oe(a)&&{url_query:a},...Oe(c)&&{ref_query:c}};return{userId:r.sessionParams.userId,uUid:r.sessionParams.user_uuid,stUid:r.sessionParams.stream_uuid,crAt:B(),e:"page_view",url:s,ref:i,...Oe(u)&&{attrs:u}}},Ue=(e,r)=>e.map((e=>se(e)?{...e,payload:Ie(e,r)}:ae(e)?{...e,payload:Re(e,r)}:ie(e)?{...e,payload:Pe(e,r)}:e)),Te=(()=>{const[e,r,t]=function(){let e=()=>{},r=()=>{};return[new Promise(((t,n)=>{e=t,r=n})),e,r]}();let n=null;const o=e=>{try{n=be(e)}catch(r){q.error({type:O,err:r,data:{initConfig:e}})}},s=async function(r){try{if(await e,!n)throw new Error('config is not defined. use "init" method with config');const t=Ue(r,n);ue(t,n)}catch(e){q.error({type:I,err:e,data:{evts:r}})}};return{setConfig:o,init:async e=>{try{if(q.setup(e),o(e),!n)throw new Error("Error while setConfig()");fe(n.sessionParams)&&await Se(n),r(!0)}catch(r){t(r),q.error({type:S,err:r,data:{initConfig:e}})}},updateSessionParams:async e=>{try{if(!n)throw new Error("use init() method first");n.sessionParams=_e(e),await Se(n)}catch(r){q.error({type:P,err:r,data:{sessionParams:e}})}},sendEvent:function(e){return s([e],arguments.length>1&&void 0!==arguments[1]&&arguments[1])},sendEvents:s}})(),{init:xe,updateSessionParams:ke,sendEvent:Ae,sendEvents:Ce,setConfig:Ne}=Te},682:(e,r,t)=>{var n;function o(e){var r=e,t=new RegExp("(.*/)[a-zA-Z_0-9]*.js.*$");return r?r.replace(t,"$1"):"/"}t.p=o((n=document.querySelector("script[src*=ClickStreamClient_1]"))&&n.src&&document.currentScript.src),e.exports={getPublicPath:o}}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var s=r[n]={exports:{}};return e[n](s,s.exports,t),s.exports}t.d=(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.p="/",t(682);var n=t(799);ClickStreamClient_1=n})();
//# sourceMappingURL=https://ppf-static-source-maps-20201028070046695300000001.s3.amazonaws.com/ClickStreamClient_1/30100/ClickStreamClient_1.js.map